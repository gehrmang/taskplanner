<div class="col25">
  <div class="framed-container">
    <div class="profile-image-container">
      <img ng-src="{{current.avatar}}" ng-show="current.avatar != null" />
      <img ng-src="{{vm.getGravatarUrl()}}" />
    </div>
    <div style="text-align: center; width: 100%; line-height: 16px; margin-top: 0.5em; font-weight: bold;">
      {{vm.currentUser.firstname + ' ' + vm.currentUser.name}}
    </div>
  </div>
</div>

<div class="col75">
  <div class="framed-container">
    <form name="profileForm">
      <md-input-container class="md-block">
        <label>{{'PROFILE.USERNAME' | translate}}</label>
        <input ng-model="vm.editUser.username" disabled>
      </md-input-container>
      <md-input-container class="md-block">
        <label>{{'PROFILE.FIRSTNAME' | translate}}</label>
        <input required name="firstname" ng-model="vm.editUser.firstname">
        <div ng-messages="profileForm.firstname.$error">
          <div ng-message="required">{{'PROFILE.FIRSTNAME_REQUIRED' | translate}}</div>
        </div>
      </md-input-container>
      <md-input-container class="md-block">
        <label>{{'PROFILE.NAME' | translate}}</label>
        <input required name="lastname" ng-model="vm.editUser.name">
        <div ng-messages="profileForm.lastname.$error">
          <div ng-message="required">{{'PROFILE.NAME_REQUIRED' | translate}}</div>
        </div>
      </md-input-container>
      <md-input-container class="md-block">
        <label>{{'PROFILE.EMAIL' | translate}}</label>
        <input type="email" name="email" ng-model="vm.editUser.email" ng-pattern="/^.+@.+\..+$/" />
        <div ng-messages="profileForm.email.$error">
          <div ng-message="pattern">{{'GLOBAL_ERROR.INVALID_EMAIL_FORMAT' | translate}}</div>
        </div>
      </md-input-container>
      <md-input-container style="margin: 0;">
        <label>{{'PROFILE.LANGUAGE' | translate}}</label>
        <md-select ng-model="vm.editUser.language">
          <md-option value="en_US">{{'LANGUAGES.en_US' | translate}}</md-option>
          <md-option value="en_GB">{{'LANGUAGES.en_GB' | translate}}</md-option>
          <md-option value="de_DE">{{'LANGUAGES.de_DE' | translate}}</md-option>
        </md-select>
      </md-input-container>

      <div style="width: 100%; margin-top: 3em;">
        <md-button ng-click="vm.saveUser()">
          {{'GLOBAL.SAVE' | translate}}
        </md-button>
        <md-button ng-click="vm.reset()">
          {{'GLOBAL.RESET' | translate}}
        </md-button>

        <md-button ng-click="vm.openPasswordDialog()">
          {{'PROFILE.CHANGE_PASSWORD' | translate}}
        </md-button>
      </div>
    </form>
  </div>
</div>
